<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<template id="income_by_insurance">
			<t t-call="web.html_container">
				<t t-call="web.external_layout">
					<div class="page">
						<style>
							.cell_label {
								color:#009688;
							}
							.line_style1 {
								border-top: 1px solid black;
								border-left: 1px solid black;
								border-right: 1px solid black;
								border-bottom:1px solid #000000;
							}
							.font_white {
								color:white;background-color: #009688;
							}
						</style>
						<div class="text-center cell_label">
							 <h2><b>Income By Insurance Company</b></h2>
						 </div>
						<center>
							 <table name="master" width="100%">
								<colgroup>
									<col width='25%' />
									<col width='25%' />
									<col width='25%' />
									<col width='25%' />
								</colgroup>
								<thead>
									<tr>
										<th/>
										<th/>
										<th/>
										<th/>
									</tr>
								</thead>
								<tbody class="patient_invoice_tbody">
									<tr>
										<td class="cell_label"><strong>Period From</strong></td>
										<td>: <span t-esc="period_start" t-options='{"widget": "date"}'/></td>
										<td class="cell_label"><strong>Report Date</strong></td>
										<td>: <span t-esc="datetime.datetime.now()" t-options='{"widget": "datetime"}'/></td>
									</tr>
									<tr>
										<td class="cell_label"><strong>Period To</strong></td>
										<td>: <span t-esc="period_stop" t-options='{"widget": "date"}'/></td>
										<td class="cell_label"><strong>Insurance Company</strong></td>
										<td>: <span t-esc="docs.get_record_names(docs.insurance_company)"/></td>
										<!--<td style="color:#009688;"><strong>Doctors</strong></td>-->
										<!--<td>: <span t-esc="doctor_list" /></td>-->
									</tr>
									<!--<tr>-->
										<!--<td style="color:#009688;"><strong>Departments</strong></td>-->
										<!--<td>: <span t-esc="department_list" /></td>-->
										<!--<td/>-->
										<!--<td/>-->
									<!--</tr>-->
									<tr>
										<td class="cell_label"><strong>Departments</strong></td>
										<td>: <span t-esc="docs.get_record_names(docs.department_ids)"/></td>
										<td class="cell_label"><strong>Doctors</strong></td>
										<td>: <span t-esc="docs.get_record_names(docs.doctor_ids)"/></td>
									</tr>
									<tr>
										<td class="cell_label"><strong>Services</strong></td>
										<td colspan="3">: <span t-esc="docs.get_record_names(docs.service_ids)"/></td>
									</tr>

								</tbody>
							</table>
						</center>
						<br/>

						
						<table class="table table-striped" >
					          <thead class="line_style1">
									<th class="text-center line_style1 font_white">Insurance Company</th>
									<th class="text-center line_style1 font_white">No of Patients</th>
									<th class="text-center line_style1 font_white">No of Invoice</th>
									<th class="text-center line_style1 font_white">Total</th>
							  </thead>
								
							 <tbody width="100%">
							    <t t-foreach="get_income_insurance_company" t-as="o" >
									<t t-set="insurance" t-value="get_income_insurance_company[o]"/>
									<tr class="line_style1">
										<td style="border-left: 1px solid black;border-right: 1px solid black;"
											width="30%" class="text-center">
											<t t-esc="insurance['name']"/>
										</td>
										<td style="border-left: 1px solid black;border-right: 1px solid black;"
											width="30%" class="text-center">
											<t t-esc="len(insurance['partner_ids'])"/>
										</td>
										<td style="border-left: 1px solid black;border-right: 1px solid black;"
											width="30%" class="text-center">
											<t t-esc="insurance['invoice_count']"/>
										</td>
										<td style="border-left: 1px solid black;border-right: 1px solid black;"
											width="40%" class="text-center">
											<t t-esc="'%.2f'% insurance['total']"/>
										</td>
									</tr>
								</t>
						      </tbody> 
						</table>
					</div>
				</t>

			</t>
		</template>
	</data>
</odoo>
